<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medici</title>
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css">
    <link href="https://fonts.googleapis.com/css2?family=Bodoni+Moda:ital,wght@1,400;1,900&family=Space+Mono&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <style>
        :root {
            --bg: #0a0b10;
            --accent: #e2c08d;
            --line: rgba(226, 192, 141, 0.1);
            --font-mono: 'Space Mono', monospace;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            background: radial-gradient(circle at center, #161822 0%, #0a0b10 100%);
            color: #fff; font-family: 'Pretendard', sans-serif;
            overflow: hidden; height: 100vh; width: 100vw;
        }

        /* 배경 보조선 */
        .ambient-svg { position: fixed; inset: 0; z-index: 1; pointer-events: none; opacity: 0.4; }
        .ambient-line { fill: none; stroke: var(--line); stroke-width: 0.5; }

        /* 뒤로가기 버튼 */
        .btn-back {
            position: fixed; top: 50px; left: 50px; z-index: 100;
            display: flex; align-items: center; gap: 15px;
            text-decoration: none; color: var(--accent);
            font-family: var(--font-mono); font-size: 11px; letter-spacing: 2px;
        }
        .btn-back .line {
            width: 30px; height: 1px; background: var(--accent);
            transition: width 0.4s cubic-bezier(0.25, 1, 0.5, 1);
            position: relative;
        }
        .btn-back:hover .line { width: 60px; }
        .btn-back .line::before {
            content: ''; position: absolute; left: 0; top: -3px;
            width: 7px; height: 7px; border-left: 1px solid var(--accent);
            border-top: 1px solid var(--accent); transform: rotate(-45deg);
        }

        .map-wrapper {
            position: relative; width: 100%; height: 100%;
            display: flex; align-items: center; justify-content: center; z-index: 10;
        }

        /* 중앙 CORE */
        .core-hub {
            position: relative; width: 110px; height: 110px;
            border: 1px solid var(--accent); z-index: 20;
            display: flex; align-items: center; justify-content: center;
            background: rgba(10, 11, 16, 0.9);
            box-shadow: 0 0 30px rgba(226, 192, 141, 0.1);
        }
        .core-hub span { font-family: var(--font-mono); font-size: 10px; letter-spacing: 4px; color: var(--accent); }

        /* ROOM 박스 */
        .room-box {
            position: absolute; width: 170px; height: 90px;
            text-decoration: none; color: #fff; z-index: 15;
            transition: 0.6s cubic-bezier(0.2, 1, 0.2, 1);
        }
        .room-content {
            position: relative; width: 100%; height: 100%;
            border-left: 2px solid var(--accent);
            background: rgba(255, 255, 255, 0.03);
            display: flex; align-items: center; justify-content: center;
            backdrop-filter: blur(5px);
        }
        .room-content::after {
            content: ''; position: absolute; left: 0; top: 0; width: 0; height: 100%;
            background: var(--accent); z-index: -1; transition: 0.5s;
        }
        .room-box:hover .room-content::after { width: 100%; }
        .room-box:hover { transform: translateY(-8px) scale(1.05); }
        .room-name { font-family: var(--font-mono); font-size: 14px; letter-spacing: 2px; transition: 0.4s; }
        .room-box:hover .room-name { color: #000; font-weight: bold; }

        /* 위치 설정 */
        .r1 { top: 15%; left: 18%; } .r2 { top: 10%; left: 58%; } .r3 { top: 40%; left: 80%; }
        .r4 { bottom: 15%; left: 15%; } .r5 { bottom: 10%; left: 50%; } .r6 { bottom: 25%; left: 82%; }

        /* 연결 선 */
        .main-line { fill: none; stroke: rgba(226, 192, 141, 0.15); stroke-width: 1.5; transition: 0.6s; }
        .line-active { stroke: var(--accent); stroke-width: 2.5; filter: drop-shadow(0 0 8px var(--accent)); }
    </style>
</head>
<body>

    <a href="index.html" class="btn-back">
        <div class="line"></div>
        <span>BACK TO ENTRANCE</span>
    </a>

    <svg class="ambient-svg" id="ambient-svg"></svg>

    <div class="map-wrapper">
        <div class="core-hub" id="hub"><span>CORE</span></div>

        <svg style="position: absolute; inset: 0; width: 100%; height: 100%; pointer-events: none; z-index: 5;">
            <path class="main-line" id="l1"></path>
            <path class="main-line" id="l2"></path>
            <path class="main-line" id="l3"></path>
            <path class="main-line" id="l4"></path>
            <path class="main-line" id="l5"></path>
            <path class="main-line" id="l6"></path>
        </svg>

        <a href="room1.html" class="room-box r1" data-id="1"><div class="room-content"><div class="room-name">ROOM 1</div></div></a>
        <a href="room2.html" class="room-box r2" data-id="2"><div class="room-content"><div class="room-name">ROOM 2</div></div></a>
        <a href="room3.html" class="room-box r3" data-id="3"><div class="room-content"><div class="room-name">ROOM 3</div></div></a>
        <a href="room4.html" class="room-box r4" data-id="4"><div class="room-content"><div class="room-name">ROOM 4</div></div></a>
        <a href="room5.html" class="room-box r5" data-id="5"><div class="room-content"><div class="room-name">ROOM 5</div></div></a>
        <a href="room6.html" class="room-box r6" data-id="6"><div class="room-content"><div class="room-name">ROOM 6</div></div></a>
    </div>

    <script>
        const hub = document.getElementById('hub');
        const rooms = document.querySelectorAll('.room-box');

        function createAmbientLines() {
            const svg = document.getElementById('ambient-svg');
            for(let i=0; i<15; i++) {
                const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
                path.classList.add('ambient-line');
                const startX = Math.random() * window.innerWidth;
                const startY = Math.random() * window.innerHeight;
                const endX = Math.random() * window.innerWidth;
                const endY = Math.random() * window.innerHeight;
                path.setAttribute('d', `M ${startX} ${startY} Q ${window.innerWidth/2} ${window.innerHeight/2} ${endX} ${endY}`);
                svg.appendChild(path);
            }
        }

        function drawLines() {
            const hRect = hub.getBoundingClientRect();
            const hX = hRect.left + hRect.width / 2;
            const hY = hRect.top + hRect.height / 2;

            rooms.forEach(room => {
                const id = room.dataset.id;
                const line = document.getElementById(`l${id}`);
                const rRect = room.getBoundingClientRect();
                const rX = rRect.left + (rRect.left < hX ? rRect.width : 0);
                const rY = rRect.top + rRect.height / 2;

                const cp1x = hX + (rX - hX) * 0.5;
                const d = `M ${hX} ${hY} C ${cp1x} ${hY}, ${cp1x} ${rY}, ${rX} ${rY}`;
                line.setAttribute('d', d);
            });
        }

        rooms.forEach(room => {
            room.addEventListener('mouseenter', () => document.getElementById(`l${room.dataset.id}`).classList.add('line-active'));
            room.addEventListener('mouseleave', () => document.getElementById(`l${room.dataset.id}`).classList.remove('line-active'));
        });

        window.addEventListener('load', () => { createAmbientLines(); drawLines(); });
        window.addEventListener('resize', drawLines);
    </script>
</body>
</html>